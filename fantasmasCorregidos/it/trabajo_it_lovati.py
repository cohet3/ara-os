# -*- coding: utf-8 -*-
import re, sys, HTMLParser, urllib2, ssl, json, requests
from urlparse import parse_qs
from urllib import urlencode
from StringIO import StringIO
import gzip
from base_it import db_it, slavy, text, dalek
#from stem.control import Controller
ssl._create_default_https_context = ssl._create_unverified_context

fetched_from = 'lovati.sites.altamiraweb.com'

xtr = '''city
"addressLocality": "
"
title
data-title="Titolo">
</span>
description
data-title="Testo">
</table>'''

xtr_view = '''viewstate
id="__VIEWSTATE" value="
"
generator
id="__VIEWSTATEGENERATOR" value="
"
validation
id="__EVENTVALIDATION" value="
"'''

stp = 'annunci-lavoro/Jobs'
page_ads = 10 
page_stp = 1

pagination_generator = lambda url: (url.format(page=page) for page in xrange(1, 6))
# with Controller.from_port(port = 9051) as controller:
# pass
pages = (
    ('Trabajo', {
        'trabajo_subcat': (
            'http://lovati.sites.altamiraweb.com/!__EVENTTARGET=&__EVENTARGUMENT=&__LASTFOCUS=&__VIEWSTATE=%2FwEPDwUBMA9kFgICAg9kFgICAQ9kFgICAw9kFgICDw9kFgJmD2QWAgIBD2QWBgIBD2QWBAIDD2QWBAIBD2QWAmYPZBYCZg8WAh4CaWQFDlBvcnRsZXRCdXR0b240ZAIHD2QWAmYPEA8WAh4TUGFyZW50U2VsZWN0ZWRWYWx1ZWVkZBYBZmQCBQ9kFgICAQ8WAh4HVmlzaWJsZWhkAgMPZBYCAgEPZBYEZg9kFgQCAQ9kFgJmDxYCHhlWTUZvcm1SaWNlcmNhODpQYXJhbWV0ZXJzMp4PAAEAAAD%2F%2F%2F%2F%2FAQAAAAAAAAAMAgAAAFBBbHRhbWlyYS5XZWIuVUksIFZlcnNpb249MjAxNy4zLjY3MTguMjUxNjksIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49bnVsbAUBAAAAIEFsdGFtaXJhLldlYi5EYXRhLkRhdGFDb2xsZWN0aW9uAgAAAAptX09wZXJhdG9yE0NvbGxlY3Rpb25CYXNlK2xpc3QEAxxBbHRhbWlyYS5XZWIuVUkuVHlwZU9wZXJhdG9yAgAAABxTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0AgAAAAX9%2F%2F%2F%2FHEFsdGFtaXJhLldlYi5VSS5UeXBlT3BlcmF0b3IBAAAAB3ZhbHVlX18ACAIAAAAAAAAACQQAAAAEBAAAABxTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0AwAAAAZfaXRlbXMFX3NpemUIX3ZlcnNpb24FAAAICAkFAAAABgAAAAcAAAAQBQAAAAgAAAAJBgAAAAkHAAAACQgAAAAJCQAAAAkKAAAACQsAAAANAgUGAAAAHEFsdGFtaXJhLldlYi5EYXRhLkRhdGFPYmplY3QKAAAAB21fVGFibGULbV9GaWVsZE5hbWUNbV9Db250cm9sTmFtZQdtX1ZhbHVlD21fVmFsdWVFeHRlbmRlZAxtX0NvbXBhcmlzb24GbV9UeXBlEG1fTXVsdGlwbGVWYWx1ZXMLbV9EYXRhQm91bmQQbV9TdWJzdGl0dXRlUGlwZQEBAQICBAQAAAErQWx0YW1pcmEuV2ViLkRhdGEuRGF0YU9iamVjdCtDb21wYXJpc29uRW51bQIAAAAYQWx0YW1pcmEuV2ViLlVJLlR5cGVFbnVtAgAAAAEBAgAAAAoGDAAAAAJJRAkMAAAABg0AAAALRm9ybVJpY2VyY2EKBfL%2F%2F%2F8rQWx0YW1pcmEuV2ViLkRhdGEuRGF0YU9iamVjdCtDb21wYXJpc29uRW51bQEAAAAHdmFsdWVfXwAIAgAAAAEAAAAF8f%2F%2F%2FxhBbHRhbWlyYS5XZWIuVUkuVHlwZUVudW0BAAAAB3ZhbHVlX18ACAIAAAAAAAAAAAEGEAAAAAclIzEyNCMlAQcAAAAGAAAACgYRAAAAE1N1Ym1pdE9uRW50ZXJCdXR0b24JEQAAAAYSAAAAB2NtZEZpbmQKAe3%2F%2F%2F%2Fy%2F%2F%2F%2FAQAAAAHs%2F%2F%2F%2F8f%2F%2F%2FwAAAAAAAQkQAAAAAQgAAAAGAAAACgYWAAAACENzc0NsYXNzCRYAAAAGFwAAAAAKAej%2F%2F%2F%2Fy%2F%2F%2F%2FAQAAAAHn%2F%2F%2F%2F8f%2F%2F%2FwAAAAAAAQkQAAAAAQkAAAAGAAAACgYbAAAABG5hbWUJGwAAAAYcAAAAHEZyb250b2ZmaWNlOiBSaWNlcmNhIEFubnVuY2kKAeP%2F%2F%2F%2Fy%2F%2F%2F%2FAQAAAAHi%2F%2F%2F%2F8f%2F%2F%2FwAAAAAAAQkQAAAAAQoAAAAGAAAACgYgAAAACUh0bWxJbnB1dAkgAAAABiEAAAC9BQ0KICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sLXhzLTEyIGNvbC1zbS02IGNvbC1tbS02IGNvbC1sZy00Ij4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJib3giPlBhcm9sZSBjaGlhdmUgPC9kaXY%2BDQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYm94Ij48Y21zOmZpZWxkIFRhZ05hbWU9IkpvYnMuVGl0bGUiIC8%2BPC9kaXY%2BDQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbC14cy0xMiBjb2wtc20tNiBjb2wtbW0tNiBjb2wtbGctNCI%2BDQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYm94Ij5TZWRpIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJveCI%2BPGNtczpmaWVsZCBUYWdOYW1lPSJMb2NhdGlvbnMuUHJlZmVycmVkTG9jYXRpb25zIiAvPiA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sLXhzLTEyIGNvbC1zbS02IGNvbC1tbS02IGNvbC1sZy00Ij4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJib3giPlNldHRvcmU8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJib3giPjxjbXM6ZmllbGQgVGFnTmFtZT0iVmFjYW5jeS5JbmR1c3RyeSIgLz48L2Rpdj4gDQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY%2BDQogICAgCgHe%2F%2F%2F%2F8v%2F%2F%2FwEAAAAB3f%2F%2F%2F%2FH%2F%2F%2F8AAAAAAAEJEAAAAAELAAAABgAAAAoGJQAAABJSZXNvdXJjZURvY3VtZW50SUQJJQAAAAgI5Di2BgoB2v%2F%2F%2F%2FL%2F%2F%2F8BAAAAAdn%2F%2F%2F%2Fx%2F%2F%2F%2FAAAAAAABCRAAAAALFgJmDxYCHiJWTUZvcm1SaWNlcmNhOCRGaW5kVmlldzpQYXJhbWV0ZXJzMp4PAAEAAAD%2F%2F%2F%2F%2FAQAAAAAAAAAMAgAAAFBBbHRhbWlyYS5XZWIuVUksIFZlcnNpb249MjAxNy4zLjY3MTguMjUxNjksIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49bnVsbAUBAAAAIEFsdGFtaXJhLldlYi5EYXRhLkRhdGFDb2xsZWN0aW9uAgAAAAptX09wZXJhdG9yE0NvbGxlY3Rpb25CYXNlK2xpc3QEAxxBbHRhbWlyYS5XZWIuVUkuVHlwZU9wZXJhdG9yAgAAABxTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0AgAAAAX9%2F%2F%2F%2FHEFsdGFtaXJhLldlYi5VSS5UeXBlT3BlcmF0b3IBAAAAB3ZhbHVlX18ACAIAAAAAAAAACQQAAAAEBAAAABxTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0AwAAAAZfaXRlbXMFX3NpemUIX3ZlcnNpb24FAAAICAkFAAAABgAAAAcAAAAQBQAAAAgAAAAJBgAAAAkHAAAACQgAAAAJCQAAAAkKAAAACQsAAAANAgUGAAAAHEFsdGFtaXJhLldlYi5EYXRhLkRhdGFPYmplY3QKAAAAB21fVGFibGULbV9GaWVsZE5hbWUNbV9Db250cm9sTmFtZQdtX1ZhbHVlD21fVmFsdWVFeHRlbmRlZAxtX0NvbXBhcmlzb24GbV9UeXBlEG1fTXVsdGlwbGVWYWx1ZXMLbV9EYXRhQm91bmQQbV9TdWJzdGl0dXRlUGlwZQEBAQICBAQAAAErQWx0YW1pcmEuV2ViLkRhdGEuRGF0YU9iamVjdCtDb21wYXJpc29uRW51bQIAAAAYQWx0YW1pcmEuV2ViLlVJLlR5cGVFbnVtAgAAAAEBAgAAAAoGDAAAAAJJRAkMAAAABg0AAAALRm9ybVJpY2VyY2EKBfL%2F%2F%2F8rQWx0YW1pcmEuV2ViLkRhdGEuRGF0YU9iamVjdCtDb21wYXJpc29uRW51bQEAAAAHdmFsdWVfXwAIAgAAAAEAAAAF8f%2F%2F%2FxhBbHRhbWlyYS5XZWIuVUkuVHlwZUVudW0BAAAAB3ZhbHVlX18ACAIAAAAAAAAAAAEGEAAAAAclIzEyNCMlAQcAAAAGAAAACgYRAAAAE1N1Ym1pdE9uRW50ZXJCdXR0b24JEQAAAAYSAAAAB2NtZEZpbmQKAe3%2F%2F%2F%2Fy%2F%2F%2F%2FAQAAAAHs%2F%2F%2F%2F8f%2F%2F%2FwAAAAAAAQkQAAAAAQgAAAAGAAAACgYWAAAACENzc0NsYXNzCRYAAAAGFwAAAAAKAej%2F%2F%2F%2Fy%2F%2F%2F%2FAQAAAAHn%2F%2F%2F%2F8f%2F%2F%2FwAAAAAAAQkQAAAAAQkAAAAGAAAACgYbAAAABG5hbWUJGwAAAAYcAAAAHEZyb250b2ZmaWNlOiBSaWNlcmNhIEFubnVuY2kKAeP%2F%2F%2F%2Fy%2F%2F%2F%2FAQAAAAHi%2F%2F%2F%2F8f%2F%2F%2FwAAAAAAAQkQAAAAAQoAAAAGAAAACgYgAAAACUh0bWxJbnB1dAkgAAAABiEAAAC9BQ0KICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sLXhzLTEyIGNvbC1zbS02IGNvbC1tbS02IGNvbC1sZy00Ij4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJib3giPlBhcm9sZSBjaGlhdmUgPC9kaXY%2BDQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYm94Ij48Y21zOmZpZWxkIFRhZ05hbWU9IkpvYnMuVGl0bGUiIC8%2BPC9kaXY%2BDQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbC14cy0xMiBjb2wtc20tNiBjb2wtbW0tNiBjb2wtbGctNCI%2BDQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYm94Ij5TZWRpIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJveCI%2BPGNtczpmaWVsZCBUYWdOYW1lPSJMb2NhdGlvbnMuUHJlZmVycmVkTG9jYXRpb25zIiAvPiA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sLXhzLTEyIGNvbC1zbS02IGNvbC1tbS02IGNvbC1sZy00Ij4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJib3giPlNldHRvcmU8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJib3giPjxjbXM6ZmllbGQgVGFnTmFtZT0iVmFjYW5jeS5JbmR1c3RyeSIgLz48L2Rpdj4gDQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY%2BDQogICAgCgHe%2F%2F%2F%2F8v%2F%2F%2FwEAAAAB3f%2F%2F%2F%2FH%2F%2F%2F8AAAAAAAEJEAAAAAELAAAABgAAAAoGJQAAABJSZXNvdXJjZURvY3VtZW50SUQJJQAAAAgI5Di2BgoB2v%2F%2F%2F%2FL%2F%2F%2F8BAAAAAdn%2F%2F%2F%2Fx%2F%2F%2F%2FAAAAAAABCRAAAAALFgJmDw8WAh4uVk1Gb3JtUmljZXJjYTgkRmluZFZpZXckRm9ybVJpY2VyY2E6UGFyYW1ldGVyczKeDwABAAAA%2F%2F%2F%2F%2FwEAAAAAAAAADAIAAABQQWx0YW1pcmEuV2ViLlVJLCBWZXJzaW9uPTIwMTcuMy42NzE4LjI1MTY5LCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPW51bGwFAQAAACBBbHRhbWlyYS5XZWIuRGF0YS5EYXRhQ29sbGVjdGlvbgIAAAAKbV9PcGVyYXRvchNDb2xsZWN0aW9uQmFzZStsaXN0BAMcQWx0YW1pcmEuV2ViLlVJLlR5cGVPcGVyYXRvcgIAAAAcU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAIAAAAF%2Ff%2F%2F%2FxxBbHRhbWlyYS5XZWIuVUkuVHlwZU9wZXJhdG9yAQAAAAd2YWx1ZV9fAAgCAAAAAAAAAAkEAAAABAQAAAAcU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAMAAAAGX2l0ZW1zBV9zaXplCF92ZXJzaW9uBQAACAgJBQAAAAYAAAAHAAAAEAUAAAAIAAAACQYAAAAJBwAAAAkIAAAACQkAAAAJCgAAAAkLAAAADQIFBgAAABxBbHRhbWlyYS5XZWIuRGF0YS5EYXRhT2JqZWN0CgAAAAdtX1RhYmxlC21fRmllbGROYW1lDW1fQ29udHJvbE5hbWUHbV9WYWx1ZQ9tX1ZhbHVlRXh0ZW5kZWQMbV9Db21wYXJpc29uBm1fVHlwZRBtX011bHRpcGxlVmFsdWVzC21fRGF0YUJvdW5kEG1fU3Vic3RpdHV0ZVBpcGUBAQECAgQEAAABK0FsdGFtaXJhLldlYi5EYXRhLkRhdGFPYmplY3QrQ29tcGFyaXNvbkVudW0CAAAAGEFsdGFtaXJhLldlYi5VSS5UeXBlRW51bQIAAAABAQIAAAAKBgwAAAACSUQJDAAAAAYNAAAAC0Zvcm1SaWNlcmNhCgXy%2F%2F%2F%2FK0FsdGFtaXJhLldlYi5EYXRhLkRhdGFPYmplY3QrQ29tcGFyaXNvbkVudW0BAAAAB3ZhbHVlX18ACAIAAAABAAAABfH%2F%2F%2F8YQWx0YW1pcmEuV2ViLlVJLlR5cGVFbnVtAQAAAAd2YWx1ZV9fAAgCAAAAAAAAAAABBhAAAAAHJSMxMjQjJQEHAAAABgAAAAoGEQAAABNTdWJtaXRPbkVudGVyQnV0dG9uCREAAAAGEgAAAAdjbWRGaW5kCgHt%2F%2F%2F%2F8v%2F%2F%2FwEAAAAB7P%2F%2F%2F%2FH%2F%2F%2F8AAAAAAAEJEAAAAAEIAAAABgAAAAoGFgAAAAhDc3NDbGFzcwkWAAAABhcAAAAACgHo%2F%2F%2F%2F8v%2F%2F%2FwEAAAAB5%2F%2F%2F%2F%2FH%2F%2F%2F8AAAAAAAEJEAAAAAEJAAAABgAAAAoGGwAAAARuYW1lCRsAAAAGHAAAABxGcm9udG9mZmljZTogUmljZXJjYSBBbm51bmNpCgHj%2F%2F%2F%2F8v%2F%2F%2FwEAAAAB4v%2F%2F%2F%2FH%2F%2F%2F8AAAAAAAEJEAAAAAEKAAAABgAAAAoGIAAAAAlIdG1sSW5wdXQJIAAAAAYhAAAAvQUNCiAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbC14cy0xMiBjb2wtc20tNiBjb2wtbW0tNiBjb2wtbGctNCI%2BDQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYm94Ij5QYXJvbGUgY2hpYXZlIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJveCI%2BPGNtczpmaWVsZCBUYWdOYW1lPSJKb2JzLlRpdGxlIiAvPjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY%2BDQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2wteHMtMTIgY29sLXNtLTYgY29sLW1tLTYgY29sLWxnLTQiPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJveCI%2BU2VkaSA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJib3giPjxjbXM6ZmllbGQgVGFnTmFtZT0iTG9jYXRpb25zLlByZWZlcnJlZExvY2F0aW9ucyIgLz4gPC9kaXY%2BDQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbC14cy0xMiBjb2wtc20tNiBjb2wtbW0tNiBjb2wtbGctNCI%2BDQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYm94Ij5TZXR0b3JlPC9kaXY%2BDQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYm94Ij48Y21zOmZpZWxkIFRhZ05hbWU9IlZhY2FuY3kuSW5kdXN0cnkiIC8%2BPC9kaXY%2BIA0KICAgICAgICAgICAgPC9kaXY%2BDQogICAgICAgIDwvZGl2Pg0KICAgIAoB3v%2F%2F%2F%2FL%2F%2F%2F8BAAAAAd3%2F%2F%2F%2Fx%2F%2F%2F%2FAAAAAAABCRAAAAABCwAAAAYAAAAKBiUAAAASUmVzb3VyY2VEb2N1bWVudElECSUAAAAICOQ4tgYKAdr%2F%2F%2F%2Fy%2F%2F%2F%2FAQAAAAHZ%2F%2F%2F%2F8f%2F%2F%2FwAAAAAAAQkQAAAAC2QWAmYPZBYCAgMPZBYCAgIPZBYGAgEPZBYCAgMPZBYGZg8PFgIeBFRleHRlZGQCAQ8PFgoeDEVycm9yTWVzc2FnZQU8SWwgY2FtcG8gIlRpdG9sbyIgZGV2ZSBlc3NlcmUgbHVuZ28gZGEgIjAiIGEgIjI1NSIgY2FyYXR0ZXJpHgxDb250cm9sTGFiZWwFBlRpdG9sbx4NTWF4aW11bUxlbmd0aAL%2FAR4HRGlzcGxheQsqKlN5c3RlbS5XZWIuVUkuV2ViQ29udHJvbHMuVmFsaWRhdG9yRGlzcGxheQIeEUNvbnRyb2xUb1ZhbGlkYXRlBQxGbGQxMTE5OTAwNjdkZAICDw8WCh8HBV5JbCBjYW1wbyAiVGl0b2xvIiBkZXZlIGVzc2VyZSBkaSB0aXBvICJUZXN0byIgKGZvcm1hdDogIiUldHlwZV90ZXh0JSUiIGZvciAiJSVleGFtcGxlX3RleHQlJSIpHwoLKwQCHgxSZXF1aXJlZFR5cGULKXpBbHRhbWlyYS5XZWIuVmFsaWRhdGlvbi5SZXF1aXJlZFR5cGVFbnVtLCBBbHRhbWlyYS5XZWIuVUksIFZlcnNpb249MjAxNy4zLjY3MTguMjUxNjksIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49bnVsbAAfCwUMRmxkMTExOTkwMDY3HwgFBlRpdG9sb2RkAgMPZBYCAgMPZBYCAgEPFgIeBVZhbHVlZWQCBQ9kFgICAw9kFgICAQ8WAh8NZWQCAw9kFgICAQ9kFgJmDxYCHgVjbGFzcwUGYnV0dG9uZAICD2QWBAIFD2QWAmYPFgIeD1ZNMTE6UGFyYW1ldGVyczKJEQABAAAA%2F%2F%2F%2F%2FwEAAAAAAAAADAIAAABQQWx0YW1pcmEuV2ViLlVJLCBWZXJzaW9uPTIwMTcuMy42NzE4LjI1MTY5LCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPW51bGwFAQAAACBBbHRhbWlyYS5XZWIuRGF0YS5EYXRhQ29sbGVjdGlvbgIAAAAKbV9PcGVyYXRvchNDb2xsZWN0aW9uQmFzZStsaXN0BAMcQWx0YW1pcmEuV2ViLlVJLlR5cGVPcGVyYXRvcgIAAAAcU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAIAAAAF%2Ff%2F%2F%2FxxBbHRhbWlyYS5XZWIuVUkuVHlwZU9wZXJhdG9yAQAAAAd2YWx1ZV9fAAgCAAAAAAAAAAkEAAAABAQAAAAcU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAMAAAAGX2l0ZW1zBV9zaXplCF92ZXJzaW9uBQAACAgJBQAAAAoAAAALAAAAEAUAAAAQAAAACQYAAAAJBwAAAAkIAAAACQkAAAAJCgAAAAkLAAAACQwAAAAJDQAAAAkOAAAACQ8AAAANBgUGAAAAHEFsdGFtaXJhLldlYi5EYXRhLkRhdGFPYmplY3QKAAAAB21fVGFibGULbV9GaWVsZE5hbWUNbV9Db250cm9sTmFtZQdtX1ZhbHVlD21fVmFsdWVFeHRlbmRlZAxtX0NvbXBhcmlzb24GbV9UeXBlEG1fTXVsdGlwbGVWYWx1ZXMLbV9EYXRhQm91bmQQbV9TdWJzdGl0dXRlUGlwZQEBAQICBAQAAAErQWx0YW1pcmEuV2ViLkRhdGEuRGF0YU9iamVjdCtDb21wYXJpc29uRW51bQIAAAAYQWx0YW1pcmEuV2ViLlVJLlR5cGVFbnVtAgAAAAEBAgAAAAoGEAAAAARuYW1lCRAAAAAGEQAAABpGcm9udG9mZmljZTogTGlzdGEgQW5udW5jaQoF7v%2F%2F%2FytBbHRhbWlyYS5XZWIuRGF0YS5EYXRhT2JqZWN0K0NvbXBhcmlzb25FbnVtAQAAAAd2YWx1ZV9fAAgCAAAAAQAAAAXt%2F%2F%2F%2FGEFsdGFtaXJhLldlYi5VSS5UeXBlRW51bQEAAAAHdmFsdWVfXwAIAgAAAAAAAAAAAQYUAAAAByUjMTI0IyUBBwAAAAYAAAAKBhUAAAAOT3JkZXJCeUNvbHVtbnMJFQAAAAYWAAAAF0pvYnMuRGF0ZVB1Ymxpc2hlZCBERVNDCgHp%2F%2F%2F%2F7v%2F%2F%2FwEAAAAB6P%2F%2F%2F%2B3%2F%2F%2F8AAAAAAAEJFAAAAAEIAAAABgAAAAoGGgAAAA9DbGljY2FibGVDb2x1bW4JGgAAAAYbAAAACkpvYnMuVGl0bGUKAeT%2F%2F%2F%2Fu%2F%2F%2F%2FAQAAAAHj%2F%2F%2F%2F7f%2F%2F%2FwAAAAAAAQkUAAAAAQkAAAAGAAAACgYfAAAAA3VybAkfAAAABiAAAAAKJSVKT0JVUkwlJQoB3%2F%2F%2F%2F%2B7%2F%2F%2F8BAAAAAd7%2F%2F%2F%2Ft%2F%2F%2F%2FAAAAAAABCRQAAAABCgAAAAYAAAAKBiQAAAAQTm9SZWNvcmRzTWVzc2FnZQkkAAAABiUAAAAXTmVzc3VuIGFubnVuY2lvIHRyb3ZhdG8KAdr%2F%2F%2F%2Fu%2F%2F%2F%2FAQAAAAHZ%2F%2F%2F%2F7f%2F%2F%2FwAAAAAAAQkUAAAAAQsAAAAGAAAACgYpAAAADUhpZGRlbkNvbHVtbnMJKQAAAAYqAAAACkpvYnMuSm9iSUQKAdX%2F%2F%2F%2Fu%2F%2F%2F%2FAQAAAAHU%2F%2F%2F%2F7f%2F%2F%2FwAAAAAAAQkUAAAAAQwAAAAGAAAACgYuAAAAC1Jvd3NQZXJQYWdlCS4AAAAGLwAAAAIxMAoB0P%2F%2F%2F%2B7%2F%2F%2F8BAAAAAc%2F%2F%2F%2F%2Ft%2F%2F%2F%2FAAAAAAABCRQAAAABDQAAAAYAAAAKBjMAAAAaVXBkYXRlSW1wcmVzc2lvblN0YXRpc3RpY3MJMwAAAAY0AAAABHRydWUKAcv%2F%2F%2F%2Fu%2F%2F%2F%2FAQAAAAHK%2F%2F%2F%2F7f%2F%2F%2FwAAAAAAAQkUAAAAAQ4AAAAGAAAACgY4AAAACUh0bWxJbnB1dAk4AAAABjkAAACdBA0KICAgICAgICA8Z3JpZD4NCiAgICAgICAgICAgIDxjb2x1bW5zPg0KICAgICAgICAgICAgICAgIDxjb2x1bW4gVGFnTmFtZT0iSm9icy5Kb2JJRCIgSGlkZGVuQ29sdW1uPSJ0cnVlIiAvPg0KICAgICAgICAgICAgICAgIDxjb2x1bW4gVGFnTmFtZT0iSm9icy5UaXRsZSIgQ3NzQ2xhc3NDZWxsPSJHUklEX0RBVF9DRUwgdGl0bGVDZWxsIiBVUkw9IiUlSk9CVVJMJSUiIC8%2BDQogICAgICAgICAgICAgICAgPGNvbHVtbiBUYWdOYW1lPSJKb2JzLkRhdGVQdWJsaXNoZWQiIENzc0NsYXNzQ2VsbD0iR1JJRF9EQVRfQ0VMIGF1dG9XaWR0aCIgLz4NCiAgICAgICAgICAgICAgICA8Y29sdW1uIFRhZ05hbWU9IlZhY2FuY3kuTG9jYXRpb25zIiBDc3NDbGFzc0NlbGw9IkdSSURfREFUX0NFTCBhdXRvV2lkdGgiIC8%2BDQogICAgICAgICAgICAgICAgPGNvbHVtbiBUYWdOYW1lPSJWYWNhbmN5LkluZHVzdHJ5IiBDc3NDbGFzc0NlbGw9IkdSSURfREFUX0NFTCBhdXRvV2lkdGgiIC8%2BDQogICAgICAgICAgICA8L2NvbHVtbnM%2BDQogICAgICAgIDwvZ3JpZD4NCiAgICAKAcb%2F%2F%2F%2Fu%2F%2F%2F%2FAQAAAAHF%2F%2F%2F%2F7f%2F%2F%2FwAAAAAAAQkUAAAAAQ8AAAAGAAAACgY9AAAAElJlc291cmNlRG9jdW1lbnRJRAk9AAAACAjkOLYGCgHC%2F%2F%2F%2F7v%2F%2F%2FwEAAAABwf%2F%2F%2F%2B3%2F%2F%2F8AAAAAAAEJFAAAAAsWAmYPFgIeGVZNMTEkVGFibGVWaWV3OlBhcmFtZXRlcnMyiREAAQAAAP%2F%2F%2F%2F8BAAAAAAAAAAwCAAAAUEFsdGFtaXJhLldlYi5VSSwgVmVyc2lvbj0yMDE3LjMuNjcxOC4yNTE2OSwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1udWxsBQEAAAAgQWx0YW1pcmEuV2ViLkRhdGEuRGF0YUNvbGxlY3Rpb24CAAAACm1fT3BlcmF0b3ITQ29sbGVjdGlvbkJhc2UrbGlzdAQDHEFsdGFtaXJhLldlYi5VSS5UeXBlT3BlcmF0b3ICAAAAHFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QCAAAABf3%2F%2F%2F8cQWx0YW1pcmEuV2ViLlVJLlR5cGVPcGVyYXRvcgEAAAAHdmFsdWVfXwAIAgAAAAAAAAAJBAAAAAQEAAAAHFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QDAAAABl9pdGVtcwVfc2l6ZQhfdmVyc2lvbgUAAAgICQUAAAAKAAAACwAAABAFAAAAEAAAAAkGAAAACQcAAAAJCAAAAAkJAAAACQoAAAAJCwAAAAkMAAAACQ0AAAAJDgAAAAkPAAAADQYFBgAAABxBbHRhbWlyYS5XZWIuRGF0YS5EYXRhT2JqZWN0CgAAAAdtX1RhYmxlC21fRmllbGROYW1lDW1fQ29udHJvbE5hbWUHbV9WYWx1ZQ9tX1ZhbHVlRXh0ZW5kZWQMbV9Db21wYXJpc29uBm1fVHlwZRBtX011bHRpcGxlVmFsdWVzC21fRGF0YUJvdW5kEG1fU3Vic3RpdHV0ZVBpcGUBAQECAgQEAAABK0FsdGFtaXJhLldlYi5EYXRhLkRhdGFPYmplY3QrQ29tcGFyaXNvbkVudW0CAAAAGEFsdGFtaXJhLldlYi5VSS5UeXBlRW51bQIAAAABAQIAAAAKBhAAAAAEbmFtZQkQAAAABhEAAAAaRnJvbnRvZmZpY2U6IExpc3RhIEFubnVuY2kKBe7%2F%2F%2F8rQWx0YW1pcmEuV2ViLkRhdGEuRGF0YU9iamVjdCtDb21wYXJpc29uRW51bQEAAAAHdmFsdWVfXwAIAgAAAAEAAAAF7f%2F%2F%2FxhBbHRhbWlyYS5XZWIuVUkuVHlwZUVudW0BAAAAB3ZhbHVlX18ACAIAAAAAAAAAAAEGFAAAAAclIzEyNCMlAQcAAAAGAAAACgYVAAAADk9yZGVyQnlDb2x1bW5zCRUAAAAGFgAAABdKb2JzLkRhdGVQdWJsaXNoZWQgREVTQwoB6f%2F%2F%2F%2B7%2F%2F%2F8BAAAAAej%2F%2F%2F%2Ft%2F%2F%2F%2FAAAAAAABCRQAAAABCAAAAAYAAAAKBhoAAAAPQ2xpY2NhYmxlQ29sdW1uCRoAAAAGGwAAAApKb2JzLlRpdGxlCgHk%2F%2F%2F%2F7v%2F%2F%2FwEAAAAB4%2F%2F%2F%2F%2B3%2F%2F%2F8AAAAAAAEJFAAAAAEJAAAABgAAAAoGHwAAAAN1cmwJHwAAAAYgAAAACiUlSk9CVVJMJSUKAd%2F%2F%2F%2F%2Fu%2F%2F%2F%2FAQAAAAHe%2F%2F%2F%2F7f%2F%2F%2FwAAAAAAAQkUAAAAAQoAAAAGAAAACgYkAAAAEE5vUmVjb3Jkc01lc3NhZ2UJJAAAAAYlAAAAF05lc3N1biBhbm51bmNpbyB0cm92YXRvCgHa%2F%2F%2F%2F7v%2F%2F%2FwEAAAAB2f%2F%2F%2F%2B3%2F%2F%2F8AAAAAAAEJFAAAAAELAAAABgAAAAoGKQAAAA1IaWRkZW5Db2x1bW5zCSkAAAAGKgAAAApKb2JzLkpvYklECgHV%2F%2F%2F%2F7v%2F%2F%2FwEAAAAB1P%2F%2F%2F%2B3%2F%2F%2F8AAAAAAAEJFAAAAAEMAAAABgAAAAoGLgAAAAtSb3dzUGVyUGFnZQkuAAAABi8AAAACMTAKAdD%2F%2F%2F%2Fu%2F%2F%2F%2FAQAAAAHP%2F%2F%2F%2F7f%2F%2F%2FwAAAAAAAQkUAAAAAQ0AAAAGAAAACgYzAAAAGlVwZGF0ZUltcHJlc3Npb25TdGF0aXN0aWNzCTMAAAAGNAAAAAR0cnVlCgHL%2F%2F%2F%2F7v%2F%2F%2FwEAAAAByv%2F%2F%2F%2B3%2F%2F%2F8AAAAAAAEJFAAAAAEOAAAABgAAAAoGOAAAAAlIdG1sSW5wdXQJOAAAAAY5AAAAnQQNCiAgICAgICAgPGdyaWQ%2BDQogICAgICAgICAgICA8Y29sdW1ucz4NCiAgICAgICAgICAgICAgICA8Y29sdW1uIFRhZ05hbWU9IkpvYnMuSm9iSUQiIEhpZGRlbkNvbHVtbj0idHJ1ZSIgLz4NCiAgICAgICAgICAgICAgICA8Y29sdW1uIFRhZ05hbWU9IkpvYnMuVGl0bGUiIENzc0NsYXNzQ2VsbD0iR1JJRF9EQVRfQ0VMIHRpdGxlQ2VsbCIgVVJMPSIlJUpPQlVSTCUlIiAvPg0KICAgICAgICAgICAgICAgIDxjb2x1bW4gVGFnTmFtZT0iSm9icy5EYXRlUHVibGlzaGVkIiBDc3NDbGFzc0NlbGw9IkdSSURfREFUX0NFTCBhdXRvV2lkdGgiIC8%2BDQogICAgICAgICAgICAgICAgPGNvbHVtbiBUYWdOYW1lPSJWYWNhbmN5LkxvY2F0aW9ucyIgQ3NzQ2xhc3NDZWxsPSJHUklEX0RBVF9DRUwgYXV0b1dpZHRoIiAvPg0KICAgICAgICAgICAgICAgIDxjb2x1bW4gVGFnTmFtZT0iVmFjYW5jeS5JbmR1c3RyeSIgQ3NzQ2xhc3NDZWxsPSJHUklEX0RBVF9DRUwgYXV0b1dpZHRoIiAvPg0KICAgICAgICAgICAgPC9jb2x1bW5zPg0KICAgICAgICA8L2dyaWQ%2BDQogICAgCgHG%2F%2F%2F%2F7v%2F%2F%2FwEAAAABxf%2F%2F%2F%2B3%2F%2F%2F8AAAAAAAEJFAAAAAEPAAAABgAAAAoGPQAAABJSZXNvdXJjZURvY3VtZW50SUQJPQAAAAgI5Di2BgoBwv%2F%2F%2F%2B7%2F%2F%2F8BAAAAAcH%2F%2F%2F%2Ft%2F%2F%2F%2FAAAAAAABCRQAAAALFgJmD2QWAmYPZBYEZg8PFgIfAmhkZAIBDw8WAh8CaGRkAgcPZBYEAgEPZBYCZg8WBh4FdGl0bGUFI1NhbHZhIHF1ZXN0YSByaWNlcmNhIGNvbWUgSm9iIEFsZXJ0HgNhbHQFI1NhbHZhIHF1ZXN0YSByaWNlcmNhIGNvbWUgSm9iIEFsZXJ0Hw4FB3NhdmVqb2JkAgMPZBYCZg8WBh8RBQhGZWVkIFJTUx8SBQhGZWVkIFJTUx8OBQlyc3NidXR0b25kAgUPZBYCAgEPZBYCAgEPZBYCZg8WAh4PVk0xNTpQYXJhbWV0ZXJzMv8JAAEAAAD%2F%2F%2F%2F%2FAQAAAAAAAAAMAgAAAFBBbHRhbWlyYS5XZWIuVUksIFZlcnNpb249MjAxNy4zLjY3MTguMjUxNjksIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49bnVsbAUBAAAAIEFsdGFtaXJhLldlYi5EYXRhLkRhdGFDb2xsZWN0aW9uAgAAAAptX09wZXJhdG9yE0NvbGxlY3Rpb25CYXNlK2xpc3QEAxxBbHRhbWlyYS5XZWIuVUkuVHlwZU9wZXJhdG9yAgAAABxTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0AgAAAAX9%2F%2F%2F%2FHEFsdGFtaXJhLldlYi5VSS5UeXBlT3BlcmF0b3IBAAAAB3ZhbHVlX18ACAIAAAAAAAAACQQAAAAEBAAAABxTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0AwAAAAZfaXRlbXMFX3NpemUIX3ZlcnNpb24FAAAICAkFAAAAAwAAAAQAAAAQBQAAAAQAAAAJBgAAAAkHAAAACQgAAAAKBQYAAAAcQWx0YW1pcmEuV2ViLkRhdGEuRGF0YU9iamVjdAoAAAAHbV9UYWJsZQttX0ZpZWxkTmFtZQ1tX0NvbnRyb2xOYW1lB21fVmFsdWUPbV9WYWx1ZUV4dGVuZGVkDG1fQ29tcGFyaXNvbgZtX1R5cGUQbV9NdWx0aXBsZVZhbHVlcwttX0RhdGFCb3VuZBBtX1N1YnN0aXR1dGVQaXBlAQEBAgIEBAAAAStBbHRhbWlyYS5XZWIuRGF0YS5EYXRhT2JqZWN0K0NvbXBhcmlzb25FbnVtAgAAABhBbHRhbWlyYS5XZWIuVUkuVHlwZUVudW0CAAAAAQECAAAACgYJAAAAB3RhZ25hbWUJCQAAAAYKAAAAIUZyb250b2ZmaWNlLlN0YW1wYS5BemllbmRhLkZvb3RlcgoF9f%2F%2F%2FytBbHRhbWlyYS5XZWIuRGF0YS5EYXRhT2JqZWN0K0NvbXBhcmlzb25FbnVtAQAAAAd2YWx1ZV9fAAgCAAAAAQAAAAX0%2F%2F%2F%2FGEFsdGFtaXJhLldlYi5VSS5UeXBlRW51bQEAAAAHdmFsdWVfXwAIAgAAAAAAAAAAAQYNAAAAByUjMTI0IyUBBwAAAAYAAAAKBg4AAAAJSHRtbElucHV0CQ4AAAAGDwAAAIwCDQogICAgICAgICA8Y21zOmZpZWxkIFRhZ05hbWU9IkNvbXBhbmllcy5Db21wYW55TmFtZSIgLz4gDQogICAgICAgICA8Y21zOmZpZWxkIFRhZ05hbWU9IkNvbXBhbmllcy5DaXR5IiAvPg0KICAgICAgICAgPGNtczpmaWVsZCBUYWdOYW1lPSJDb21wYW5pZXMuQWRkcmVzcyIgLz4NCiAgICAgICAgIDxjbXM6ZmllbGQgVGFnTmFtZT0iQ29tcGFuaWVzLlBob25lIiAvPg0KICAgICAgICAgPGNtczpmaWVsZCBUYWdOYW1lPSJDb21wYW5pZXMuVkFUTm8iIC8%2BDQogICAgICAgIAoB8P%2F%2F%2F%2FX%2F%2F%2F8BAAAAAe%2F%2F%2F%2F%2F0%2F%2F%2F%2FAAAAAAABCQ0AAAABCAAAAAYAAAAKBhMAAAASUmVzb3VyY2VEb2N1bWVudElECRMAAAAICOQ4tgYKAez%2F%2F%2F%2F1%2F%2F%2F%2FAQAAAAHr%2F%2F%2F%2F9P%2F%2F%2FwAAAAAAAQkNAAAACxYCZg8WAh4YVk0xNSRGaW5kVmlldzpQYXJhbWV0ZXJzMv8JAAEAAAD%2F%2F%2F%2F%2FAQAAAAAAAAAMAgAAAFBBbHRhbWlyYS5XZWIuVUksIFZlcnNpb249MjAxNy4zLjY3MTguMjUxNjksIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49bnVsbAUBAAAAIEFsdGFtaXJhLldlYi5EYXRhLkRhdGFDb2xsZWN0aW9uAgAAAAptX09wZXJhdG9yE0NvbGxlY3Rpb25CYXNlK2xpc3QEAxxBbHRhbWlyYS5XZWIuVUkuVHlwZU9wZXJhdG9yAgAAABxTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0AgAAAAX9%2F%2F%2F%2FHEFsdGFtaXJhLldlYi5VSS5UeXBlT3BlcmF0b3IBAAAAB3ZhbHVlX18ACAIAAAAAAAAACQQAAAAEBAAAABxTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0AwAAAAZfaXRlbXMFX3NpemUIX3ZlcnNpb24FAAAICAkFAAAAAwAAAAQAAAAQBQAAAAQAAAAJBgAAAAkHAAAACQgAAAAKBQYAAAAcQWx0YW1pcmEuV2ViLkRhdGEuRGF0YU9iamVjdAoAAAAHbV9UYWJsZQttX0ZpZWxkTmFtZQ1tX0NvbnRyb2xOYW1lB21fVmFsdWUPbV9WYWx1ZUV4dGVuZGVkDG1fQ29tcGFyaXNvbgZtX1R5cGUQbV9NdWx0aXBsZVZhbHVlcwttX0RhdGFCb3VuZBBtX1N1YnN0aXR1dGVQaXBlAQEBAgIEBAAAAStBbHRhbWlyYS5XZWIuRGF0YS5EYXRhT2JqZWN0K0NvbXBhcmlzb25FbnVtAgAAABhBbHRhbWlyYS5XZWIuVUkuVHlwZUVudW0CAAAAAQECAAAACgYJAAAAB3RhZ25hbWUJCQAAAAYKAAAAIUZyb250b2ZmaWNlLlN0YW1wYS5BemllbmRhLkZvb3RlcgoF9f%2F%2F%2FytBbHRhbWlyYS5XZWIuRGF0YS5EYXRhT2JqZWN0K0NvbXBhcmlzb25FbnVtAQAAAAd2YWx1ZV9fAAgCAAAAAQAAAAX0%2F%2F%2F%2FGEFsdGFtaXJhLldlYi5VSS5UeXBlRW51bQEAAAAHdmFsdWVfXwAIAgAAAAAAAAAAAQYNAAAAByUjMTI0IyUBBwAAAAYAAAAKBg4AAAAJSHRtbElucHV0CQ4AAAAGDwAAAIwCDQogICAgICAgICA8Y21zOmZpZWxkIFRhZ05hbWU9IkNvbXBhbmllcy5Db21wYW55TmFtZSIgLz4gDQogICAgICAgICA8Y21zOmZpZWxkIFRhZ05hbWU9IkNvbXBhbmllcy5DaXR5IiAvPg0KICAgICAgICAgPGNtczpmaWVsZCBUYWdOYW1lPSJDb21wYW5pZXMuQWRkcmVzcyIgLz4NCiAgICAgICAgIDxjbXM6ZmllbGQgVGFnTmFtZT0iQ29tcGFuaWVzLlBob25lIiAvPg0KICAgICAgICAgPGNtczpmaWVsZCBUYWdOYW1lPSJDb21wYW5pZXMuVkFUTm8iIC8%2BDQogICAgICAgIAoB8P%2F%2F%2F%2FX%2F%2F%2F8BAAAAAe%2F%2F%2F%2F%2F0%2F%2F%2F%2FAAAAAAABCQ0AAAABCAAAAAYAAAAKBhMAAAASUmVzb3VyY2VEb2N1bWVudElECRMAAAAICOQ4tgYKAez%2F%2F%2F%2F1%2F%2F%2F%2FAQAAAAHr%2F%2F%2F%2F9P%2F%2F%2FwAAAAAAAQkNAAAACxYCZg8PFgIeJFZNMTUkRmluZFZpZXckU0NWaWV3UHJpbnQ6UGFyYW1ldGVyczL%2FCQABAAAA%2F%2F%2F%2F%2FwEAAAAAAAAADAIAAABQQWx0YW1pcmEuV2ViLlVJLCBWZXJzaW9uPTIwMTcuMy42NzE4LjI1MTY5LCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPW51bGwFAQAAACBBbHRhbWlyYS5XZWIuRGF0YS5EYXRhQ29sbGVjdGlvbgIAAAAKbV9PcGVyYXRvchNDb2xsZWN0aW9uQmFzZStsaXN0BAMcQWx0YW1pcmEuV2ViLlVJLlR5cGVPcGVyYXRvcgIAAAAcU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAIAAAAF%2Ff%2F%2F%2FxxBbHRhbWlyYS5XZWIuVUkuVHlwZU9wZXJhdG9yAQAAAAd2YWx1ZV9fAAgCAAAAAAAAAAkEAAAABAQAAAAcU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAMAAAAGX2l0ZW1zBV9zaXplCF92ZXJzaW9uBQAACAgJBQAAAAMAAAAEAAAAEAUAAAAEAAAACQYAAAAJBwAAAAkIAAAACgUGAAAAHEFsdGFtaXJhLldlYi5EYXRhLkRhdGFPYmplY3QKAAAAB21fVGFibGULbV9GaWVsZE5hbWUNbV9Db250cm9sTmFtZQdtX1ZhbHVlD21fVmFsdWVFeHRlbmRlZAxtX0NvbXBhcmlzb24GbV9UeXBlEG1fTXVsdGlwbGVWYWx1ZXMLbV9EYXRhQm91bmQQbV9TdWJzdGl0dXRlUGlwZQEBAQICBAQAAAErQWx0YW1pcmEuV2ViLkRhdGEuRGF0YU9iamVjdCtDb21wYXJpc29uRW51bQIAAAAYQWx0YW1pcmEuV2ViLlVJLlR5cGVFbnVtAgAAAAEBAgAAAAoGCQAAAAd0YWduYW1lCQkAAAAGCgAAACFGcm9udG9mZmljZS5TdGFtcGEuQXppZW5kYS5Gb290ZXIKBfX%2F%2F%2F8rQWx0YW1pcmEuV2ViLkRhdGEuRGF0YU9iamVjdCtDb21wYXJpc29uRW51bQEAAAAHdmFsdWVfXwAIAgAAAAEAAAAF9P%2F%2F%2FxhBbHRhbWlyYS5XZWIuVUkuVHlwZUVudW0BAAAAB3ZhbHVlX18ACAIAAAAAAAAAAAEGDQAAAAclIzEyNCMlAQcAAAAGAAAACgYOAAAACUh0bWxJbnB1dAkOAAAABg8AAACMAg0KICAgICAgICAgPGNtczpmaWVsZCBUYWdOYW1lPSJDb21wYW5pZXMuQ29tcGFueU5hbWUiIC8%2BIA0KICAgICAgICAgPGNtczpmaWVsZCBUYWdOYW1lPSJDb21wYW5pZXMuQ2l0eSIgLz4NCiAgICAgICAgIDxjbXM6ZmllbGQgVGFnTmFtZT0iQ29tcGFuaWVzLkFkZHJlc3MiIC8%2BDQogICAgICAgICA8Y21zOmZpZWxkIFRhZ05hbWU9IkNvbXBhbmllcy5QaG9uZSIgLz4NCiAgICAgICAgIDxjbXM6ZmllbGQgVGFnTmFtZT0iQ29tcGFuaWVzLlZBVE5vIiAvPg0KICAgICAgICAKAfD%2F%2F%2F%2F1%2F%2F%2F%2FAQAAAAHv%2F%2F%2F%2F9P%2F%2F%2FwAAAAAAAQkNAAAAAQgAAAAGAAAACgYTAAAAElJlc291cmNlRG9jdW1lbnRJRAkTAAAACAjkOLYGCgHs%2F%2F%2F%2F9f%2F%2F%2FwEAAAAB6%2F%2F%2F%2F%2FT%2F%2F%2F8AAAAAAAEJDQAAAAtkZGQ5pKH%2FU5h2snjHYI2H7MLD0CdyFqTkZqICUlglNnlX6w%3D%3D&__VIEWSTATEGENERATOR=E50C1FF0&__EVENTVALIDATION=%2FwEdAAw2G3NcDaPV%2BxH37IqC%2BKhU5HI2QripC%2FO9Xt2Hxh1maBAw8tqyWqouX4XhvIXgLZxs6ISkQD1vWhJpZPNeLtv91pjKaSaAU4cDuDa2%2Fw3piq8g0UAK1J3YytHUkmaGe8n1FsqxK%2F%2BYQroCU5ASG9%2B5Ki9mWwtNtWa04wYynn7V3Wot1ZreT2rHT3HPPDh6Bibkomc8C1o8eFX%2FVVe5J%2BJ3K34c%2FzUUU%2FIbkiklikmPYI1EXtxP5Fvnh5XP3I4jjAxNnhs%2F5NDwD7ooKWCR9ScOVf7L%2FS0XS7sO7E09FutlfQ%3D%3D&ctl18=ITA&VMFormRicerca8CurrentViewID=FindView&VMFormRicerca8%24FindView%24FormRicerca%24FormSC1%24FormSC1HiddenNew=None&VMFormRicerca8%24FindView%24FormRicerca%24FormSC1%24Fld111990067=&VMFormRicerca8%24FindView%24FormRicerca%24FormSC1%24Fld111990068Nested1=&VMFormRicerca8%24FindView%24FormRicerca%24FormSC1%24Fld111990068=&VMFormRicerca8%24FindView%24FormRicerca%24FormSC1%24Fld111990151Nested1=&VMFormRicerca8%24FindView%24FormRicerca%24FormSC1%24Fld111990151=&VMFormRicerca8%24FindView%24FormRicerca%24SCViewFindHiddenNew=None&VM11CurrentViewID=TableView&ReportGrid118113479=&VM11%24TableView%24SCViewReport%24FormSC2%24FormSC2HiddenNew=None&VM11%24TableView%24SCViewReport%24HdnQueryString=&VM11%24TableView%24SCViewReport%24SCViewReportHiddenNew=None&SaveJobAlert=AND%7C&VM15CurrentViewID=FindView&VM15%24FindView%24SCViewPrint%24Cell_111990147%24FormStampa1HiddenNew=None&VM15%24FindView%24SCViewPrint%24SCViewPrintHiddenNew=None&companyid=26627397&VM11%24TableView%24SCViewReport%24ctl03={page}',
        )
    }
     ),
)


def crawl(web):
    
    sl = slavy.slavy()
    sl.start("http://lovati.sites.altamiraweb.com/")
    sl.metaExtract = True
    sl.extract(xtr_view)

    sl.WR = [web]
    
    if len(web.split("!")) > 1:
        data2 = parse_qs(web.split("!")[1])
        data2["__VIEWSTATE"] = sl.M[0].get("viewstate")
        data2["__VIEWSTATEGENERATOR"] = sl.M[0].get("generator")
        data2["__EVENTVALIDATION"] = sl.M[0].get("validation")
    
    #~ webPersonalizada = web.split("!")[0] + "!" + urlencode(data2)
    #~ sl.start(webPersonalizada)

    #~ ### En caso de hacerlo por requests en vez de slavy
    var1 = requests.post(url=web.split("!")[0], data=data2)
    #~ print var1.text
    sl.WR = [u"virtual:{0}".format(var1.text).encode('utf-8')]

    sl.step(stp)
    sl.WR = ["http://lovati.sites.altamiraweb.com{0}".format(y) for y in sl.WR]
    #~ sl.printWR()
    #~ exit(0)

    if not len(sl.WR):
        raise Exception('[WARN] Empty web region')

    sl.extract(xtr)

    if not len(sl.M):
        raise Exception('[WARN] Empty Model')

    for offer in sl.M:
        ad = dict(title='', url='', city='', province='', salary=0, company='', description='', contract='',
                  published_at='')

        ad['title'] = offer.get("title", "")
        ad['description'] = re.sub("\\\\n|\\\\r|\\\\t","", offer.get("description", ""))
        ad['url'] = offer.get("@url", "")
        ad['city'] = offer.get("city", "")
        ad['province'] =offer.get("province", "")
        ad['salary'] = offer.get("salary", '0')
        ad['company'] = offer.get("company", "")
        ad['contract'] = offer.get("contract", "")

        if not ad["title"]:
            ad["title"] = re.sub("\|.*?$", "", offer.get("title_aux", ""))

        yield ad


# saltcellar = dalek.Dalek(pages, page_ads, fetched_from, db_pt, pagination_generator, debug=False)
# saltcellar.crawl = crawl
# saltcellar.exterminate()

# new code for test auto debug script
if __name__ == "__main__":

    if len(sys.argv) == 2 and sys.argv[1] == "test":
        debug_mode = True
    elif len(sys.argv) < 2:
        debug_mode = False
    else:
        print "usage: python filename.py (test)"
        print "example for test: python <filename.py> test "
        print "example for run: python <filename.py>"
        exit(1)


    saltcellar = dalek.Dalek(pages, page_ads, fetched_from, db_it, pagination_generator, debug_mode)
    saltcellar.crawl = crawl
    saltcellar.exterminate()
